CREATE TABLE VIVIENDAS 
(
  IDRECINTO NUMBER NOT NULL 
, IDOPERARIO NUMBER NOT NULL 
, NUMEROHABITACIONES NUMBER NOT NULL 
, PRECIONOCHE NUMBER NOT NULL 
, PRECIOSEGURO NUMBER NOT NULL 
, DIRECCION VARCHAR2(35) NOT NULL 
, DIASUSADA NUMBER DEFAULT 0 NOT NULL 
, CONSTRAINT VIVIENDAS_PK PRIMARY KEY 
  (
    IDRECINTO 
  )
  ENABLE 
);

ALTER TABLE VIVIENDAS
ADD CONSTRAINT VIVIENDAS_FK1 FOREIGN KEY
(
  IDOPERARIO 
)
REFERENCES OPERARIOS
(
  ID 
)
ENABLE;

ALTER TABLE VIVIENDAS
ADD CONSTRAINT VIVIENDAS_FK2 FOREIGN KEY
(
  IDRECINTO 
)
REFERENCES RECINTOS
(
  ID 
)
ENABLE;

ALTER TABLE VIVIENDAS
ADD CONSTRAINT CHKMAXIMODIASANIO CHECK 
(DIASUSADA<=30)
ENABLE;

ALTER TABLE VIVIENDAS
ADD CONSTRAINT CHKNUMHABITACIONESPOSITIVO CHECK 
(NUMEROHABITACIONES>0)
ENABLE;

ALTER TABLE VIVIENDAS
ADD CONSTRAINT CHKPRECIOSPOSITIVOS CHECK 
(PRECIONOCHE>=0 AND PRECIOSEGURO>=0)
ENABLE;
